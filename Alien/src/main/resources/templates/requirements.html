<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>A.L.I.E.N - Visa Assessment</title>
  <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #e8e6e1;
            min-height: 100vh;
            color: #2c3e50;
            padding: 20px;
        }

        /* Top Navigation Bar */
        .top-nav {
            background: #e8e6e1;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
        }

        .hamburger {
            display: flex;
            flex-direction: column;
            gap: 5px;
            cursor: pointer;
            padding: 10px;
            transition: all 0.3s ease;
        }

        .hamburger:hover {
            transform: scale(1.1);
        }

        .hamburger span {
            width: 30px;
            height: 3px;
            background: #2c3e50;
            border-radius: 3px;
            transition: all 0.3s ease;
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(8px, 8px);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(8px, -8px);
        }

        .embassy-nav-btn {
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .embassy-nav-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }

        /* Left Sidebar Navigation - 1/4 screen */
        .sidebar {
            position: fixed;
            top: 0;
            left: -25%;
            width: 25%;
            height: 100vh;
            background: #ffffff;
            box-shadow: 5px 0 20px rgba(0,0,0,0.1);
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            overflow-y: auto;
        }

        .sidebar.active {
            left: 0;
        }

        .sidebar-header {
            padding: 30px 25px;
            background: linear-gradient(135deg, #5a67d8 0%, #8b5cf6 100%);
            color: white;
        }

        .sidebar-header h2 {
            font-size: 20px;
            letter-spacing: 2px;
            margin-bottom: 5px;
        }

        .sidebar-header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .sidebar-menu {
            padding: 20px 0;
        }

        .menu-item {
            padding: 15px 25px;
            color: #2c3e50;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            cursor: pointer;
        }

        .menu-item:hover {
            background: #f8f9fa;
            border-left-color: #5a67d8;
            padding-left: 30px;
        }

        .menu-item .icon {
            font-size: 20px;
            width: 30px;
        }

        .menu-item .text {
            font-size: 15px;
            font-weight: 500;
        }

        .menu-divider {
            height: 1px;
            background: #e9ecef;
            margin: 15px 25px;
        }

        .logout-btn {
            margin: 20px 25px;
            padding: 12px 20px;
            background: #e53e3e;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: #c53030;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(229, 62, 62, 0.3);
        }

        /* Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 999;
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Chatbot Button */
        .chatbot-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #5a67d8 0%, #8b5cf6 100%);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(90, 103, 216, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 900;
        }

        .chatbot-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 30px rgba(90, 103, 216, 0.4);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding-top: 100px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 42px;
            color: #2c3e50;
            letter-spacing: 6px;
            margin-bottom: 10px;
        }

        .header p {
            color: #6c757d;
            font-size: 16px;
        }

        /* Progress Navigation */
        .progress-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin: 40px 0;
        }

        .progress-step {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #ffffff;
            border: 3px solid #e9ecef;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 18px;
            color: #adb5bd;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .progress-step:hover {
            transform: scale(1.1);
            border-color: #5a67d8;
        }

        .progress-step.active {
            background: #5a67d8;
            color: white;
            border-color: #5a67d8;
            transform: scale(1.2);
        }

        .progress-step.completed {
            background: #28a745;
            color: white;
            border-color: #28a745;
        }

        .progress-line {
            width: 60px;
            height: 3px;
            background: #e9ecef;
            transition: all 0.3s ease;
        }

        .progress-line.completed {
            background: #28a745;
        }

        /* Card Styles */
        .card {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }

        .card h2 {
            color: #2c3e50;
            font-size: 28px;
            margin-bottom: 20px;
        }

        .card p {
            color: #6c757d;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        /* Step Content */
        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            color: #2c3e50;
            font-weight: 500;
            margin-bottom: 10px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #5a67d8;
        }

        /* Visa Type Selection */
        .visa-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .visa-option {
            padding: 30px 20px;
            border: 3px solid #e9ecef;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .visa-option:hover {
            transform: translateY(-5px);
            border-color: #5a67d8;
            box-shadow: 0 10px 30px rgba(90, 103, 216, 0.2);
        }

        .visa-option.selected {
            border-color: #5a67d8;
            background: #f0f3ff;
        }

        .visa-option h3 {
            color: #2c3e50;
            font-size: 24px;
            margin-bottom: 10px;
        }

        .visa-option p {
            color: #6c757d;
            font-size: 14px;
            margin: 0;
        }

        /* GPA Section */
        .gpa-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 12px;
            margin: 30px 0;
            display: none;
        }

        .gpa-section.active {
            display: block;
        }

        .gpa-input {
            text-align: center;
            margin: 20px 0;
        }

        .gpa-input input {
            font-size: 24px;
            text-align: center;
            max-width: 200px;
            margin: 0 auto;
        }

        /* Questions Section */
        .questions-section {
            display: none;
            margin-top: 30px;
        }

        .questions-section.active {
            display: block;
        }

        .question-card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            border-left: 4px solid #5a67d8;
        }

        .question-card h4 {
            color: #2c3e50;
            font-size: 18px;
            margin-bottom: 15px;
        }

        .options-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-item:hover {
            border-color: #5a67d8;
            background: #f0f3ff;
        }

        .option-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 15px;
            cursor: pointer;
            accent-color: #5a67d8;
        }

        .option-item label {
            cursor: pointer;
            flex: 1;
            margin: 0;
            font-weight: 400;
        }

        .option-points {
            background: #5a67d8;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        /* Results Section */
        .results-section {
            display: none;
        }

        .results-section.active {
            display: block;
        }

        .score-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 16px;
            text-align: center;
            margin-bottom: 30px;
        }

        .score-display {
            font-size: 72px;
            font-weight: 700;
            margin: 20px 0;
        }

        .score-label {
            font-size: 24px;
            opacity: 0.9;
        }

        .result-card {
            background: white;
            padding: 30px;
            border-radius: 16px;
            margin-bottom: 20px;
            border-left: 5px solid #5a67d8;
        }

        .result-card h3 {
            color: #2c3e50;
            font-size: 22px;
            margin-bottom: 15px;
        }

        .suggestion-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 12px;
            border-left: 3px solid #dc3545;
        }

        .suggestion-item strong {
            color: #dc3545;
            display: block;
            margin-bottom: 5px;
        }

        .strength-item {
            background: #d4edda;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 12px;
            border-left: 3px solid #28a745;
        }

        .strength-item strong {
            color: #28a745;
            display: block;
            margin-bottom: 5px;
        }

        /* Low GPA Page */
        .low-gpa-page {
            display: none;
        }

        .low-gpa-page.active {
            display: block;
        }

        .improvement-guide {
            background: white;
            border-radius: 16px;
            padding: 40px;
            margin-top: 30px;
        }

        .improvement-guide h3 {
            color: #2c3e50;
            font-size: 28px;
            margin-bottom: 25px;
            text-align: center;
        }

        .improvement-category {
            background: #f8f9fa;
            border-radius: 12px;
            margin-bottom: 20px;
            overflow: hidden;
            border-left: 4px solid #5a67d8;
            transition: all 0.3s ease;
        }

        .improvement-category:hover {
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .category-header {
            padding: 20px 25px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
        }

        .category-header:hover {
            background: #f8f9fa;
        }

        .category-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .category-icon {
            font-size: 24px;
        }

        .expand-icon {
            font-size: 24px;
            color: #5a67d8;
            transition: transform 0.3s ease;
        }

        .improvement-category.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .category-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: #f8f9fa;
        }

        .improvement-category.expanded .category-content {
            max-height: 2000px;
        }

        .category-content-inner {
            padding: 25px;
        }

        .improvement-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 12px;
            border-left: 3px solid #5a67d8;
        }

        .improvement-item:last-child {
            margin-bottom: 0;
        }

        .improvement-item p {
            color: #34495e;
            line-height: 1.6;
            margin: 0;
        }

        .improvement-item strong {
            color: #2c3e50;
            display: block;
            margin-bottom: 5px;
        }

        .alert-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin: 30px 0;
        }

        .alert-box h3 {
            color: #856404;
            font-size: 28px;
            margin-bottom: 15px;
        }

        .alert-box p {
            color: #856404;
            font-size: 18px;
            line-height: 1.6;
        }

        /* Buttons */
        .btn-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 35px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #5a67d8;
            color: white;
        }

        .btn-primary:hover {
            background: #4c59c4;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(90, 103, 216, 0.3);
        }

        .btn-secondary {
            background: white;
            color: #2c3e50;
            border: 2px solid #e9ecef;
        }

        .btn-secondary:hover {
            border-color: #5a67d8;
            color: #5a67d8;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 75%;
                left: -75%;
            }

            .top-nav {
                padding: 15px 20px;
            }

            .container {
                padding-top: 90px;
            }

            .nav-links {
                gap: 20px;
                font-size: 14px;
            }

            .title-wrapper h1 {
                font-size: 36px;
                letter-spacing: 4px;
            }

            .catchphrase {
                font-size: 16px;
            }

            .hero {
                padding: 40px 25px;
            }

            .hero-content h2 {
                font-size: 24px;
            }

            .oauth-buttons {
                flex-direction: column;
            }

            .improvement-category {
                margin-bottom: 15px;
            }

            .category-header {
                padding: 15px 20px;
            }

            .category-title {
                font-size: 16px;
            }

            .category-content-inner {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
<!-- Top Navigation Bar -->
<nav class="top-nav">
  <div class="hamburger" id="hamburger">
    <span></span>
    <span></span>
    <span></span>
  </div>
  <div class="embassy-nav-btn" onclick="window.location.href='/embassy'" title="Embassy Resources">
    🏛️
  </div>
</nav>

<!-- Left Sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-header">
    <h2>Navigation</h2>
    <p>Explore all features</p>
  </div>
  <div class="sidebar-menu">
    <a href="/homepage" class="menu-item">
      <span class="icon">🏠</span>
      <span class="text">Home</span>
    </a>
    <a href="/assessment" class="menu-item">
      <span class="icon">📋</span>
      <span class="text">Visa Assessment</span>
    </a>
    <a href="/checklist" class="menu-item">
      <span class="icon">✓</span>
      <span class="text">Requirements Checklist</span>
    </a>
    <a href="/community" class="menu-item">
      <span class="icon">👥</span>
      <span class="text">Community Hub</span>
    </a>
    <a href="/success-stories" class="menu-item">
      <span class="icon">⭐</span>
      <span class="text">Success Stories</span>
    </a>
    <a href="/companies" class="menu-item">
      <span class="icon">🏢</span>
      <span class="text">Company Spotlight</span>
    </a>
    <div class="menu-divider"></div>
    <a href="/profile" class="menu-item">
      <span class="icon">👤</span>
      <span class="text">My Profile</span>
    </a>
    <a href="/settings" class="menu-item">
      <span class="icon">⚙️</span>
      <span class="text">Settings</span>
    </a>
  </div>
  <button class="logout-btn" onclick="logout()">
    <span>🚪</span>
    <span>Logout</span>
  </button>
</div>

<!-- Overlay -->
<div class="overlay" id="overlay"></div>

<!-- Chatbot Button -->
<button class="chatbot-button" title="Chat with us">
  💬
</button>

<div class="container">
  <div class="header">
    <h1>A.L.I.E.N</h1>
    <p>Visa Assessment Tool</p>
  </div>

  <!-- Progress Navigation -->
  <div class="progress-nav">
    <div class="progress-step active" data-step="1">1</div>
    <div class="progress-line"></div>
    <div class="progress-step" data-step="2">2</div>
    <div class="progress-line"></div>
    <div class="progress-step" data-step="3">3</div>
    <div class="progress-line"></div>
    <div class="progress-step" data-step="4">4</div>
  </div>

  <!-- Step 1: Personal Information -->
  <div class="step-content active" data-step="1">
    <div class="card">
      <h2>Personal Information</h2>
      <p>Let's start with your basic details</p>

      <div class="form-group">
        <label>Full Name *</label>
        <input type="text" id="fullName" placeholder="Enter your full name" required>
      </div>

      <div class="form-group">
        <label>Email Address *</label>
        <input type="email" id="email" placeholder="your.email@example.com" required>
      </div>

      <div class="form-group">
        <label>Phone Number *</label>
        <input type="tel" id="phone" placeholder="+1 (555) 000-0000" required>
      </div>

      <div class="form-group">
        <label>Current Country *</label>
        <select id="country" required>
          <option value="">Select your country</option>
          <option value="India">India</option>
          <option value="USA">United States</option>
          <option value="UK">United Kingdom</option>
          <option value="Canada">Canada</option>
          <option value="Other">Other</option>
        </select>
      </div>

      <div class="btn-container">
        <button class="btn btn-primary" onclick="saveStep1()">Save & Continue</button>
      </div>
    </div>
  </div>

  <!-- Step 2: Visa Type Selection -->
  <div class="step-content" data-step="2">
    <div class="card">
      <h2>Select Visa Type</h2>
      <p>Choose the visa type you want to assess</p>

      <div class="visa-options">
        <div class="visa-option" onclick="selectVisa('O1')">
          <h3>O-1 Visa</h3>
          <p>For individuals with extraordinary ability</p>
        </div>
        <div class="visa-option" onclick="selectVisa('F1')">
          <h3>F-1 Visa</h3>
          <p>For academic students</p>
        </div>
      </div>

      <!-- GPA Check Section -->
      <div id="gpaSection" class="gpa-section">
        <h3 style="text-align: center; color: #2c3e50; margin-bottom: 20px;">Enter Your GPA</h3>
        <p style="text-align: center; color: #6c757d;">Please enter your GPA on a 4.0 scale</p>
        <div class="gpa-input">
          <input type="number" id="gpaInput" step="0.01" min="0" max="4.0" placeholder="e.g., 3.5">
        </div>
        <div class="btn-container">
          <button class="btn btn-primary" onclick="checkGPA()">Check Eligibility</button>
        </div>
      </div>

      <!-- Low GPA Page -->
      <div id="lowGpaPage" class="low-gpa-page">
        <div class="alert-box">
          <h3>⚠️ GPA Below Threshold</h3>
          <p id="lowGpaMessage"></p>
        </div>

        <div class="improvement-guide">
          <h3>📚 How to Improve Your Eligibility</h3>
          <p style="text-align: center; color: #6c757d; margin-bottom: 30px;">Click on each category to view detailed improvement strategies</p>

          <!-- GPA Category -->
          <div class="improvement-category" onclick="toggleCategory(this)">
            <div class="category-header">
              <div class="category-title">
                <span class="category-icon">📊</span>
                <span>GPA Improvement</span>
              </div>
              <span class="expand-icon">▼</span>
            </div>
            <div class="category-content">
              <div class="category-content-inner">
                <div class="improvement-item">
                  <strong>Focus on Core Subjects</strong>
                  <p>Concentrate on core subjects related to your degree, as they carry more weight in calculations.</p>
                </div>
                <div class="improvement-item">
                  <strong>Tutoring & Study Groups</strong>
                  <p>Attend extra tutoring sessions or join study groups to clear weak concepts.</p>
                </div>
                <div class="improvement-item">
                  <strong>Professor Feedback</strong>
                  <p>Request feedback from professors on assignments and exams to target improvement areas.</p>
                </div>
                <div class="improvement-item">
                  <strong>Online Learning Platforms</strong>
                  <p>Use online platforms (Coursera, Khan Academy, edX) for difficult subjects.</p>
                </div>
                <div class="improvement-item">
                  <strong>Bridge Programs</strong>
                  <p>If already graduated, consider enrolling in a bridge program or certificate course with strong grades to show improvement.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Standardized Tests -->
          <div class="improvement-category" onclick="toggleCategory(this)">
            <div class="category-header">
              <div class="category-title">
                <span class="category-icon">📝</span>
                <span>Standardized Tests (TOEFL/IELTS/GRE/SAT)</span>
              </div>
              <span class="expand-icon">▼</span>
            </div>
            <div class="category-content">
              <div class="category-content-inner">
                <div class="improvement-item">
                  <strong>Regular Practice Exams</strong>
                  <p>Take practice exams regularly and analyze weak sections.</p>
                </div>
                <div class="improvement-item">
                  <strong>Coaching & Prep Platforms</strong>
                  <p>Enroll in coaching classes or online prep platforms (Magoosh, Kaplan).</p>
                </div>
                <div class="improvement-item">
                  <strong>Official Question Banks</strong>
                  <p>Use official question banks to practice real exam patterns.</p>
                </div>
                <div class="improvement-item">
                  <strong>Retake Strategy</strong>
                  <p>Retake tests if your score is below the university's average requirement.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Hackathons & Competitions -->
          <div class="improvement-category" onclick="toggleCategory(this)">
            <div class="category-header">
              <div class="category-title">
                <span class="category-icon">💻</span>
                <span>Hackathons & Competitions</span>
              </div>
              <span class="expand-icon">▼</span>
            </div>
            <div class="category-content">
              <div class="category-content-inner">
                <div class="improvement-item">
                  <strong>University & Online Hackathons</strong>
                  <p>Participate in university-hosted hackathons or online ones (Devpost, Kaggle, HackerEarth).</p>
                </div>
                <div class="improvement-item">
                  <strong>Coding Competitions</strong>
                  <p>Join coding competitions (Codeforces, LeetCode contests, ICPC).</p>
                </div>
                <div class="improvement-item">
                  <strong>Domain-Specific Events</strong>
                  <p>Engage in domain-specific competitions like robotics, AI challenges, business case competitions.</p>
                </div>
                <div class="improvement-item">
                  <strong>Showcase Skills</strong>
                  <p>Highlight teamwork, leadership, and innovative problem-solving from these events in your CV.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Internships -->
          <div class="improvement-category" onclick="toggleCategory(this)">
            <div class="category-header">
              <div class="category-title">
                <span class="category-icon">💼</span>
                <span>Internships</span>
              </div>
              <span class="expand-icon">▼</span>
            </div>
            <div class="category-content">
              <div class="category-content-inner">
                <div class="improvement-item">
                  <strong>Research Internships</strong>
                  <p>Look for research internships with professors or labs (adds academic weight).</p>
                </div>
                <div class="improvement-item">
                  <strong>Industry Experience</strong>
                  <p>Apply for industry internships with tech companies, startups, or NGOs.</p>
                </div>
                <div class="improvement-item">
                  <strong>Job Platforms</strong>
                  <p>Use platforms: LinkedIn, Internshala, AngelList, and university career cells.</p>
                </div>
                <div class="improvement-item">
                  <strong>Relevant Field Focus</strong>
                  <p>Focus on internships in your field of study, as it strengthens your academic profile.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Leadership & Extracurriculars -->
          <div class="improvement-category" onclick="toggleCategory(this)">
            <div class="category-header">
              <div class="category-title">
                <span class="category-icon">🎯</span>
                <span>Leadership & Extracurriculars</span>
              </div>
              <span class="expand-icon">▼</span>
            </div>
            <div class="category-content">
              <div class="category-content-inner">
                <div class="improvement-item">
                  <strong>Leadership Roles</strong>
                  <p>Take up roles like club president, event organizer, student representative.</p>
                </div>
                <div class="improvement-item">
                  <strong>Professional Chapters</strong>
                  <p>Join professional student chapters (IEEE, ACM, AIESEC).</p>
                </div>
                <div class="improvement-item">
                  <strong>Lead Events</strong>
                  <p>Lead workshops, bootcamps, or seminars.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Awards & Recognition -->
          <div class="improvement-category" onclick="toggleCategory(this)">
            <div class="category-header">
              <div class="category-title">
                <span class="category-icon">🏆</span>
                <span>Awards & Recognition</span>
              </div>
              <span class="expand-icon">▼</span>
            </div>
            <div class="category-content">
              <div class="category-content-inner">
                <div class="improvement-item">
                  <strong>Apply for Competitions</strong>
                  <p>Apply for national and international competitions in your field (science fairs, innovation challenges, music/film festivals, sports tournaments).</p>
                </div>
                <div class="improvement-item">
                  <strong>Document Everything</strong>
                  <p>Even shortlisted or finalist positions add credibility. Document everything with certificates and media coverage.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Professional Memberships -->
          <div class="improvement-category" onclick="toggleCategory(this)">
            <div class="category-header">
              <div class="category-title">
                <span class="category-icon">🎓</span>
                <span>Professional Memberships</span>
              </div>
              <span class="expand-icon">▼</span>
            </div>
            <div class="category-content">
              <div class="category-content-inner">
                <div class="improvement-item">
                  <strong>Join Recognized Bodies</strong>
                  <p>Join recognized bodies like IEEE, ACM, AMA, SAG-AFTRA, or equivalent in your domain.</p>
                </div>
                <div class="improvement-item">
                  <strong>Active Participation</strong>
                  <p>Take active roles in committees or as reviewers.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Publications & Research -->
          <div class="improvement-category" onclick="toggleCategory(this)">
            <div class="category-header">
              <div class="category-title">
                <span class="category-icon">📄</span>
                <span>Publications, Patents & Research</span>
              </div>
              <span class="expand-icon">▼</span>
            </div>
            <div class="category-content">
              <div class="category-content-inner">
                <div class="improvement-item">
                  <strong>Research Papers</strong>
                  <p>Write and publish research papers in recognized journals (Springer, IEEE, Elsevier).</p>
                </div>
                <div class="improvement-item">
                  <strong>File Patents</strong>
                  <p>File for patents if you have innovative projects.</p>
                </div>
                <div class="improvement-item">
                  <strong>Expert Contributions</strong>
                  <p>Contribute articles or expert opinions in reputed magazines or online platforms.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Media Coverage -->
          <div class="improvement-category" onclick="toggleCategory(this)">
            <div class="category-header">
              <div class="category-title">
                <span class="category-icon">📺</span>
                <span>Media Coverage & Visibility</span>
              </div>
              <span class="expand-icon">▼</span>
            </div>
            <div class="category-content">
              <div class="category-content-inner">
                <div class="improvement-item">
                  <strong>Get Featured</strong>
                  <p>Get featured in local or national newspapers, online magazines, or interviews.</p>
                </div>
                <div class="improvement-item">
                  <strong>Build Online Presence</strong>
                  <p>Share achievements on LinkedIn, Medium, or personal blogs to build visibility.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Judging & Panel Roles -->
          <div class="improvement-category" onclick="toggleCategory(this)">
            <div class="category-header">
              <div class="category-title">
                <span class="category-icon">⚖️</span>
                <span>Judging & Panel Roles</span>
              </div>
              <span class="expand-icon">▼</span>
            </div>
            <div class="category-content">
              <div class="category-content-inner">
                <div class="improvement-item">
                  <strong>Volunteer as Judge</strong>
                  <p>Volunteer to judge hackathons, competitions, or student events.</p>
                </div>
                <div class="improvement-item">
                  <strong>Reviewer Roles</strong>
                  <p>Apply to be a reviewer for academic conferences or local innovation fairs.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- High-Impact Projects -->
          <div class="improvement-category" onclick="toggleCategory(this)">
            <div class="category-header">
              <div class="category-title">
                <span class="category-icon">🚀</span>
                <span>High-Impact Projects</span>
              </div>
              <span class="expand-icon">▼</span>
            </div>
            <div class="category-content">
              <div class="category-content-inner">
                <div class="improvement-item">
                  <strong>Global Impact</strong>
                  <p>Work on projects with global or community-level impact (sustainability, AI, healthcare, etc.).</p>
                </div>
                <div class="improvement-item">
                  <strong>Collaborations</strong>
                  <p>Collaborate with universities, NGOs, or corporates.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Employment -->
          <div class="improvement-category" onclick="toggleCategory(this)">
            <div class="category-header">
              <div class="category-title">
                <span class="category-icon">🏢</span>
                <span>Strategic Employment</span>
              </div>
              <span class="expand-icon">▼</span>
            </div>
            <div class="category-content">
              <div class="category-content-inner">
                <div class="improvement-item">
                  <strong>Target Leading Companies</strong>
                  <p>Target internships or jobs with leading companies in your field. Examples: Tech (Google, Microsoft), Arts (Studios, Film Production Houses), Research (National Labs).</p>
                </div>
                <div class="improvement-item">
                  <strong>Impactful Roles</strong>
                  <p>Aim for roles with clear impact and leadership responsibilities.</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Recommendation Letters -->
          <div class="improvement-category" onclick="toggleCategory(this)">
            <div class="category-header">
              <div class="category-title">
                <span class="category-icon">✉️</span>
                <span>Recommendation Letters</span>
              </div>
              <span class="expand-icon">▼</span>
            </div>
            <div class="category-content">
              <div class="category-content-inner">
                <div class="improvement-item">
                  <strong>Strong References</strong>
                  <p>Collect strong recommendation letters from professors, employers, or industry experts.</p>
                </div>
                <div class="improvement-item">
                  <strong>Emphasis on Excellence</strong>
                  <p>Ensure letters emphasize extraordinary ability and unique contributions.</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="btn-container">
          <button class="btn btn-secondary" onclick="resetVisaSelection()">Go Back</button>
          <button class="btn btn-primary" onclick="window.location.href='/home'">Return to Home</button>
        </div>
      </div>
      <!-- O-1 Questions -->
      <div id="o1Questions" class="questions-section">
        <h3 style="margin-bottom: 25px; color: #2c3e50; text-align: center;">O-1 Visa Assessment Questions</h3>

        <!-- Question 1 -->
        <div class="question-card">
          <h4>1. Awards and Recognition</h4>
          <div class="options-group">
            <div class="option-item" onclick="selectOption(this, 'o1_q1', 'internationally', 10)">
              <input type="checkbox" id="o1_q1_int">
              <label>International awards or prizes for excellence</label>
              <span class="option-points">10 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q1', 'national', 7)">
              <input type="checkbox" id="o1_q1_nat">
              <label>National awards or prizes</label>
              <span class="option-points">7 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q1', 'regional', 4)">
              <input type="checkbox" id="o1_q1_reg">
              <label>Regional or local awards</label>
              <span class="option-points">4 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q1', 'none', 0)">
              <input type="checkbox" id="o1_q1_none">
              <label>No awards received</label>
              <span class="option-points">0 pts</span>
            </div>
          </div>
        </div>

        <!-- Question 2 -->
        <div class="question-card">
          <h4>2. Professional Memberships</h4>
          <div class="options-group">
            <div class="option-item" onclick="selectOption(this, 'o1_q2', 'outstanding', 10)">
              <input type="checkbox" id="o1_q2_out">
              <label>Member of associations requiring outstanding achievements</label>
              <span class="option-points">10 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q2', 'professional', 6)">
              <input type="checkbox" id="o1_q2_pro">
              <label>Member of professional associations</label>
              <span class="option-points">6 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q2', 'none', 0)">
              <input type="checkbox" id="o1_q2_none">
              <label>No memberships</label>
              <span class="option-points">0 pts</span>
            </div>
          </div>
        </div>

        <!-- Question 3 -->
        <div class="question-card">
          <h4>3. Published Materials</h4>
          <div class="options-group">
            <div class="option-item" onclick="selectOption(this, 'o1_q3', 'major', 10)">
              <input type="checkbox" id="o1_q3_maj">
              <label>Published in major trade publications or major media</label>
              <span class="option-points">10 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q3', 'professional', 7)">
              <input type="checkbox" id="o1_q3_pro">
              <label>Published in professional journals</label>
              <span class="option-points">7 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q3', 'local', 4)">
              <input type="checkbox" id="o1_q3_loc">
              <label>Published in local/minor publications</label>
              <span class="option-points">4 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q3', 'none', 0)">
              <input type="checkbox" id="o1_q3_none">
              <label>No publications</label>
              <span class="option-points">0 pts</span>
            </div>
          </div>
        </div>

        <!-- Question 4 -->
        <div class="question-card">
          <h4>4. Judging Others' Work</h4>
          <div class="options-group">
            <div class="option-item" onclick="selectOption(this, 'o1_q4', 'international', 10)">
              <input type="checkbox" id="o1_q4_int">
              <label>Judged work at international level</label>
              <span class="option-points">10 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q4', 'national', 7)">
              <input type="checkbox" id="o1_q4_nat">
              <label>Judged work at national level</label>
              <span class="option-points">7 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q4', 'local', 4)">
              <input type="checkbox" id="o1_q4_loc">
              <label>Judged work at local/regional level</label>
              <span class="option-points">4 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q4', 'none', 0)">
              <input type="checkbox" id="o1_q4_none">
              <label>No judging experience</label>
              <span class="option-points">0 pts</span>
            </div>
          </div>
        </div>

        <!-- Question 5 -->
        <div class="question-card">
          <h4>5. Original Contributions</h4>
          <div class="options-group">
            <div class="option-item" onclick="selectOption(this, 'o1_q5', 'major', 10)">
              <input type="checkbox" id="o1_q5_maj">
              <label>Major original contributions of significance to the field</label>
              <span class="option-points">10 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q5', 'moderate', 6)">
              <input type="checkbox" id="o1_q5_mod">
              <label>Moderate contributions recognized in field</label>
              <span class="option-points">6 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q5', 'minor', 3)">
              <input type="checkbox" id="o1_q5_min">
              <label>Minor contributions</label>
              <span class="option-points">3 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q5', 'none', 0)">
              <input type="checkbox" id="o1_q5_none">
              <label>No significant contributions</label>
              <span class="option-points">0 pts</span>
            </div>
          </div>
        </div>

        <!-- Question 6 -->
        <div class="question-card">
          <h4>6. Scholarly Articles</h4>
          <div class="options-group">
            <div class="option-item" onclick="selectOption(this, 'o1_q6', 'multiple', 10)">
              <input type="checkbox" id="o1_q6_mul">
              <label>Authored multiple scholarly articles (5+)</label>
              <span class="option-points">10 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q6', 'several', 7)">
              <input type="checkbox" id="o1_q6_sev">
              <label>Authored several articles (2-4)</label>
              <span class="option-points">7 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q6', 'one', 4)">
              <input type="checkbox" id="o1_q6_one">
              <label>Authored one article</label>
              <span class="option-points">4 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q6', 'none', 0)">
              <input type="checkbox" id="o1_q6_none">
              <label>No scholarly articles</label>
              <span class="option-points">0 pts</span>
            </div>
          </div>
        </div>

        <!-- Question 7 -->
        <div class="question-card">
          <h4>7. Critical or Essential Capacity</h4>
          <div class="options-group">
            <div class="option-item" onclick="selectOption(this, 'o1_q7', 'leading', 10)">
              <input type="checkbox" id="o1_q7_lea">
              <label>Leading or critical role in distinguished organizations</label>
              <span class="option-points">10 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q7', 'important', 6)">
              <input type="checkbox" id="o1_q7_imp">
              <label>Important role in reputable organizations</label>
              <span class="option-points">6 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q7', 'standard', 3)">
              <input type="checkbox" id="o1_q7_std">
              <label>Standard employment role</label>
              <span class="option-points">3 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q7', 'none', 0)">
              <input type="checkbox" id="o1_q7_none">
              <label>No relevant employment</label>
              <span class="option-points">0 pts</span>
            </div>
          </div>
        </div>

        <!-- Question 8 -->
        <div class="question-card">
          <h4>8. High Salary or Remuneration</h4>
          <div class="options-group">
            <div class="option-item" onclick="selectOption(this, 'o1_q8', 'exceptional', 10)">
              <input type="checkbox" id="o1_q8_exc">
              <label>Exceptionally high salary (top 10% in field)</label>
              <span class="option-points">10 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q8', 'above', 6)">
              <input type="checkbox" id="o1_q8_abo">
              <label>Above average salary for field</label>
              <span class="option-points">6 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q8', 'average', 3)">
              <input type="checkbox" id="o1_q8_avg">
              <label>Average salary for field</label>
              <span class="option-points">3 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'o1_q8', 'below', 0)">
              <input type="checkbox" id="o1_q8_bel">
              <label>Below average salary</label>
              <span class="option-points">0 pts</span>
            </div>
          </div>
        </div>
      </div>

      <!-- F-1 Questions -->
      <div id="f1Questions" class="questions-section">
        <h3 style="margin-bottom: 25px; color: #2c3e50; text-align: center;">F-1 Visa Assessment Questions</h3>

        <!-- F1 Question 1 -->
        <div class="question-card">
          <h4>1. School Acceptance</h4>
          <div class="options-group">
            <div class="option-item" onclick="selectOption(this, 'f1_q1', 'accepted', 20)">
              <input type="checkbox" id="f1_q1_acc">
              <label>Accepted by SEVP-certified school with I-20 received</label>
              <span class="option-points">20 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'f1_q1', 'pending', 10)">
              <input type="checkbox" id="f1_q1_pen">
              <label>Applied to SEVP-certified schools, awaiting decision</label>
              <span class="option-points">10 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'f1_q1', 'none', 0)">
              <input type="checkbox" id="f1_q1_none">
              <label>Not yet applied to any schools</label>
              <span class="option-points">0 pts</span>
            </div>
          </div>
        </div>

        <!-- F1 Question 2 -->
        <div class="question-card">
          <h4>2. Full-Time Student Status</h4>
          <div class="options-group">
            <div class="option-item" onclick="selectOption(this, 'f1_q2', 'fulltime', 15)">
              <input type="checkbox" id="f1_q2_ful">
              <label>Enrolled/planning full-time enrollment (12+ credits)</label>
              <span class="option-points">15 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'f1_q2', 'parttime', 5)">
              <input type="checkbox" id="f1_q2_par">
              <label>Planning part-time enrollment</label>
              <span class="option-points">5 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'f1_q2', 'unsure', 0)">
              <input type="checkbox" id="f1_q2_uns">
              <label>Unsure about enrollment status</label>
              <span class="option-points">0 pts</span>
            </div>
          </div>
        </div>

        <!-- F1 Question 3 -->
        <div class="question-card">
          <h4>3. Financial Resources</h4>
          <div class="options-group">
            <div class="option-item" onclick="selectOption(this, 'f1_q3', 'full', 20)">
              <input type="checkbox" id="f1_q3_ful">
              <label>Sufficient funds for full program duration + living expenses</label>
              <span class="option-points">20 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'f1_q3', 'partial', 10)">
              <input type="checkbox" id="f1_q3_par">
              <label>Partial funds, seeking scholarships/loans</label>
              <span class="option-points">10 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'f1_q3', 'insufficient', 0)">
              <input type="checkbox" id="f1_q3_ins">
              <label>Insufficient funds currently</label>
              <span class="option-points">0 pts</span>
            </div>
          </div>
        </div>

        <!-- F1 Question 4 -->
        <div class="question-card">
          <h4>4. English Language Proficiency</h4>
          <div class="options-group">
            <div class="option-item" onclick="selectOption(this, 'f1_q4', 'proficient', 15)">
              <input type="checkbox" id="f1_q4_pro">
              <label>Proficient with TOEFL/IELTS scores meeting requirements</label>
              <span class="option-points">15 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'f1_q4', 'enrolled', 10)">
              <input type="checkbox" id="f1_q4_enr">
              <label>Enrolled in English language program</label>
              <span class="option-points">10 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'f1_q4', 'basic', 5)">
              <input type="checkbox" id="f1_q4_bas">
              <label>Basic English skills, need improvement</label>
              <span class="option-points">5 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'f1_q4', 'none', 0)">
              <input type="checkbox" id="f1_q4_none">
              <label>Limited English proficiency</label>
              <span class="option-points">0 pts</span>
            </div>
          </div>
        </div>

        <!-- F1 Question 5 -->
        <div class="question-card">
          <h4>5. Intent to Return Home</h4>
          <div class="options-group">
            <div class="option-item" onclick="selectOption(this, 'f1_q5', 'strong', 15)">
              <input type="checkbox" id="f1_q5_str">
              <label>Strong ties to home country (property, family, job prospects)</label>
              <span class="option-points">15 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'f1_q5', 'moderate', 10)">
              <input type="checkbox" id="f1_q5_mod">
              <label>Moderate ties to home country</label>
              <span class="option-points">10 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'f1_q5', 'weak', 5)">
              <input type="checkbox" id="f1_q5_wea">
              <label>Weak ties to home country</label>
              <span class="option-points">5 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'f1_q5', 'none', 0)">
              <input type="checkbox" id="f1_q5_none">
              <label>No significant ties to home country</label>
              <span class="option-points">0 pts</span>
            </div>
          </div>
        </div>

        <!-- F1 Question 6 -->
        <div class="question-card">
          <h4>6. Valid Passport</h4>
          <div class="options-group">
            <div class="option-item" onclick="selectOption(this, 'f1_q6', 'valid', 15)">
              <input type="checkbox" id="f1_q6_val">
              <label>Valid passport (6+ months beyond intended stay)</label>
              <span class="option-points">15 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'f1_q6', 'expires', 10)">
              <input type="checkbox" id="f1_q6_exp">
              <label>Passport valid but expires within program duration</label>
              <span class="option-points">10 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'f1_q6', 'applying', 5)">
              <input type="checkbox" id="f1_q6_app">
              <label>Applying for passport</label>
              <span class="option-points">5 pts</span>
            </div>
            <div class="option-item" onclick="selectOption(this, 'f1_q6', 'none', 0)">
              <input type="checkbox" id="f1_q6_none">
              <label>No passport currently</label>
              <span class="option-points">0 pts</span>
            </div>
          </div>
        </div>
      </div>

      <div class="btn-container" id="step2Buttons">
        <button class="btn btn-secondary" onclick="goToStep(1)">Back</button>
        <button class="btn btn-primary" onclick="saveStep2()" id="continueBtn2" disabled>Calculate Results</button>
      </div>
    </div>
  </div>

  <!-- Step 3: Results -->
  <div class="step-content" data-step="3">
    <div class="card">
      <h2>Assessment Results</h2>

      <div class="results-section active">
        <div class="score-card">
          <div class="score-label">Your Score</div>
          <div class="score-display" id="scoreDisplay">0%</div>
          <p style="font-size: 18px; opacity: 0.9;" id="scoreInterpretation"></p>
        </div>

        <div class="result-card">
          <h3>✅ Your Strengths</h3>
          <div id="strengthsList"></div>
        </div>

        <div class="result-card">
          <h3>📈 Areas for Improvement</h3>
          <div id="suggestionsList"></div>
        </div>

        <div class="result-card">
          <h3>📋 Personal Information</h3>
          <div id="personalInfoDisplay"></div>
        </div>
      </div>

      <div class="btn-container">
        <button class="btn btn-secondary" onclick="goToStep(2)">Back</button>
        <button class="btn btn-success" onclick="modifyData()">Modify Information</button>
        <button class="btn btn-primary" onclick="goToStep(4)">Continue</button>
      </div>
    </div>
  </div>

  <!-- Step 4: Final Summary -->
  <div class="step-content" data-step="4">
    <div class="card">
      <h2>Complete Assessment Summary</h2>
      <div id="finalSummary"></div>

      <div style="margin-top: 40px; background: #f0f3ff; padding: 30px; border-radius: 12px;">
        <h3 style="color: #2c3e50; margin-bottom: 20px;">📋 Recommended Next Steps</h3>
        <div id="nextStepsContent"></div>
      </div>

      <div style="margin-top: 30px; background: #fff3cd; padding: 30px; border-radius: 12px;">
        <h3 style="color: #2c3e50; margin-bottom: 20px;">📚 Helpful Resources</h3>
        <div id="resourcesContent"></div>
      </div>

      <div class="btn-container">
        <button class="btn btn-secondary" onclick="goToStep(3)">Back</button>
        <button class="btn btn-success" onclick="downloadResults()">Download Results</button>
        <button class="btn btn-primary" onclick="resetAssessment()">Start New Assessment</button>
      </div>
    </div>
  </div>
</div>

<script>
        let currentStep = 1;
        let selectedVisaType = '';
        let userGPA = 0;
        let selectedAnswers = {};
        let totalScore = 0;

        // Hamburger and Sidebar Toggle
        const hamburger = document.getElementById('hamburger');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');

        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        });

        overlay.addEventListener('click', () => {
            hamburger.classList.remove('active');
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
        });

        // Toggle improvement category
        function toggleCategory(element) {
            element.classList.toggle('expanded');
        }

        // Logout Function
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                window.location.href = '/welcome';
            }
        }

        // Step navigation
        function goToStep(step) {
            currentStep = step;
            updateStepDisplay();
        }

        function updateStepDisplay() {
            document.querySelectorAll('.step-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelector(`.step-content[data-step="${currentStep}"]`).classList.add('active');

            document.querySelectorAll('.progress-step').forEach((stepEl, index) => {
                const stepNum = index + 1;
                stepEl.classList.remove('active', 'completed');

                if (stepNum === currentStep) {
                    stepEl.classList.add('active');
                } else if (stepNum < currentStep) {
                    stepEl.classList.add('completed');
                }
            });

            document.querySelectorAll('.progress-line').forEach((line, index) => {
                if (index < currentStep - 1) {
                    line.classList.add('completed');
                } else {
                    line.classList.remove('completed');
                }
            });

            if (currentStep === 3) {
                displayResults();
            }
            if (currentStep === 4) {
                displayFinalSummary();
            }
        }

        document.querySelectorAll('.progress-step').forEach(step => {
            step.addEventListener('click', function() {
                const targetStep = parseInt(this.dataset.step);
                goToStep(targetStep);
            });
        });

        // Step 1: Save personal information
        function saveStep1() {
            const data = {
                fullName: document.getElementById('fullName').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                country: document.getElementById('country').value
            };

            if (!data.fullName || !data.email || !data.phone || !data.country) {
                alert('Please fill all required fields');
                return;
            }

            localStorage.setItem('personalInfo', JSON.stringify(data));
            goToStep(2);
        }

        // Visa type selection
        function selectVisa(type) {
            selectedVisaType = type;
            selectedAnswers = {};

            document.querySelectorAll('.visa-option').forEach(option => {
                option.classList.remove('selected');
            });
            event.target.closest('.visa-option').classList.add('selected');

            document.getElementById('o1Questions').classList.remove('active');
            document.getElementById('f1Questions').classList.remove('active');
            document.getElementById('gpaSection').classList.remove('active');
            document.getElementById('lowGpaPage').classList.remove('active');
            document.getElementById('step2Buttons').style.display = 'flex';

            document.getElementById('gpaSection').classList.add('active');
            document.getElementById('gpaInput').value = '';
            document.getElementById('continueBtn2').disabled = true;
        }

        // Check GPA
        // Check GPA
        function checkGPA() {
            const gpa = parseFloat(document.getElementById('gpaInput').value);

            if (!gpa || gpa < 0 || gpa > 4.0) {
                alert('Please enter a valid GPA between 0 and 4.0');
                return;
            }

            userGPA = gpa;
            const threshold = selectedVisaType === 'O1' ? 3.5 : 2.5;

            if (gpa >= threshold) {
                document.getElementById('gpaSection').classList.remove('active');
                document.getElementById('lowGpaPage').classList.remove('active');

                if (selectedVisaType === 'O1') {
                    document.getElementById('o1Questions').classList.add('active');
                    document.getElementById('f1Questions').classList.remove('active');
                } else if (selectedVisaType === 'F1') {
                    document.getElementById('f1Questions').classList.add('active');
                    document.getElementById('o1Questions').classList.remove('active');
                }
                document.getElementById('step2Buttons').style.display = 'flex';
                document.getElementById('continueBtn2').disabled = false;
            } else {
                document.getElementById('gpaSection').classList.remove('active');
                document.getElementById('o1Questions').classList.remove('active');
                document.getElementById('f1Questions').classList.remove('active');
                document.getElementById('lowGpaPage').classList.add('active');
                document.getElementById('step2Buttons').style.display = 'none';

                const message = `Your GPA of ${gpa.toFixed(2)} is below the ${threshold} threshold required for ${selectedVisaType} visa consideration. We recommend focusing on improving your academic credentials and gaining relevant experience before applying.`;
                document.getElementById('lowGpaMessage').textContent = message;
            }
        }

        function resetVisaSelection() {
            document.getElementById('lowGpaPage').classList.remove('active');
            document.getElementById('gpaSection').classList.add('active');
            document.getElementById('step2Buttons').style.display = 'flex';
            document.getElementById('gpaInput').value = '';
        }

        function redirectToImprovement() {
            // This function is no longer needed as improvement guide is now inline
            alert('Please review the improvement strategies above to strengthen your profile.');
        }

        // Select option with checkbox
        function selectOption(element, questionId, optionValue, points) {
            const checkbox = element.querySelector('input[type="checkbox"]');
            const questionCard = element.closest('.question-card');
            const allCheckboxes = questionCard.querySelectorAll('input[type="checkbox"]');

            allCheckboxes.forEach(cb => {
                cb.checked = false;
                cb.parentElement.style.background = 'white';
                cb.parentElement.style.borderColor = '#e9ecef';
            });

            checkbox.checked = true;
            element.style.background = '#f0f3ff';
            element.style.borderColor = '#5a67d8';

            selectedAnswers[questionId] = {
                value: optionValue,
                points: points,
                text: element.querySelector('label').textContent
            };
        }

        // Step 2: Calculate and save results
        function saveStep2() {
            if (!selectedVisaType) {
                alert('Please select a visa type');
                return;
            }

            const expectedQuestions = selectedVisaType === 'O1' ? 8 : 6;
            const answeredQuestions = Object.keys(selectedAnswers).length;

            if (answeredQuestions < expectedQuestions) {
                alert(`Please answer all ${expectedQuestions} questions before continuing.`);
                return;
            }

            totalScore = Object.values(selectedAnswers).reduce((sum, answer) => sum + answer.points, 0);

            const maxScore = selectedVisaType === 'O1' ? 80 : 100;
            const percentage = (totalScore / maxScore) * 100;

            const assessmentData = {
                visaType: selectedVisaType,
                gpa: userGPA,
                answers: selectedAnswers,
                totalPoints: totalScore,
                maxPoints: maxScore,
                percentage: percentage.toFixed(1)
            };

            localStorage.setItem('visaAssessment', JSON.stringify(assessmentData));
            goToStep(3);
        }

        // Display results
        function displayResults() {
            const personalInfo = JSON.parse(localStorage.getItem('personalInfo') || '{}');
            const assessmentData = JSON.parse(localStorage.getItem('visaAssessment') || '{}');

            const percentage = parseFloat(assessmentData.percentage || 0);
            document.getElementById('scoreDisplay').textContent = percentage.toFixed(1) + '%';

            let interpretation = '';
            if (assessmentData.visaType === 'O1') {
                if (percentage >= 75) {
                    interpretation = '🌟 Excellent! Strong O-1 visa candidate';
                } else if (percentage >= 50) {
                    interpretation = '✓ Good potential. Consider strengthening weak areas';
                } else if (percentage >= 30) {
                    interpretation = '⚠️ Fair. Significant improvements needed';
                } else {
                    interpretation = '❌ Build more credentials before applying';
                }
            } else {
                if (percentage >= 85) {
                    interpretation = '🌟 Excellent! Strong F-1 visa candidate';
                } else if (percentage >= 70) {
                    interpretation = '✓ Good standing. Address minor gaps';
                } else if (percentage >= 50) {
                    interpretation = '⚠️ Fair. Several requirements need attention';
                } else {
                    interpretation = '❌ Major requirements missing';
                }
            }
            document.getElementById('scoreInterpretation').textContent = interpretation;

            let strengthsHTML = '';
            let suggestionsHTML = '';

            const answers = assessmentData.answers || {};

            Object.entries(answers).forEach(([questionId, answer]) => {
                const questionNumber = questionId.split('_')[1].substring(1);
                const questionMap = getQuestionMap(assessmentData.visaType);
                const questionText = questionMap[questionNumber];

                if (answer.points >= 10) {
                    strengthsHTML += `<div class="strength-item">
                        <strong>✓ ${questionText}</strong>
                        <p>${answer.text} (+${answer.points} points)</p>
                    </div>`;
                } else if (answer.points < 10) {
                    const suggestion = getSuggestion(assessmentData.visaType, questionNumber, answer.value);
                    suggestionsHTML += `<div class="suggestion-item">
                        <strong>! ${questionText}</strong>
                        <p>Current: ${answer.text} (${answer.points} points)</p>
                        <p><strong>How to improve:</strong> ${suggestion}</p>
                    </div>`;
                }
            });

            document.getElementById('strengthsList').innerHTML = strengthsHTML || '<p style="color: #6c757d;">No strong areas identified yet.</p>';
            document.getElementById('suggestionsList').innerHTML = suggestionsHTML || '<p style="color: #28a745;">Great! All areas are strong.</p>';

            let personalHTML = `
                <p><strong>Name:</strong> ${personalInfo.fullName}</p>
                <p><strong>Email:</strong> ${personalInfo.email}</p>
                <p><strong>Phone:</strong> ${personalInfo.phone}</p>
                <p><strong>Country:</strong> ${personalInfo.country}</p>
                <p><strong>GPA:</strong> ${assessmentData.gpa}/4.0</p>
                <p><strong>Visa Type:</strong> ${assessmentData.visaType}</p>
            `;
            document.getElementById('personalInfoDisplay').innerHTML = personalHTML;
        }

        function getQuestionMap(visaType) {
            if (visaType === 'O1') {
                return {
                    '1': 'Awards and Recognition',
                    '2': 'Professional Memberships',
                    '3': 'Published Materials',
                    '4': 'Judging Others\' Work',
                    '5': 'Original Contributions',
                    '6': 'Scholarly Articles',
                    '7': 'Critical Employment Role',
                    '8': 'High Salary/Remuneration'
                };
            } else {
                return {
                    '1': 'School Acceptance',
                    '2': 'Full-Time Student Status',
                    '3': 'Financial Resources',
                    '4': 'English Proficiency',
                    '5': 'Intent to Return Home',
                    '6': 'Valid Passport'
                };
            }
        }

        function getSuggestion(visaType, questionNumber, answerValue) {
            if (visaType === 'O1') {
                const suggestions = {
                    '1': 'Apply for industry awards, participate in competitions, seek recognition from professional bodies',
                    '2': 'Join prestigious professional associations that require peer recommendations or achievements',
                    '3': 'Publish articles in major trade journals, seek media coverage for your work, write for industry publications',
                    '4': 'Volunteer as a reviewer for conferences, join award committees, become a competition judge',
                    '5': 'Focus on innovative projects, publish research, create new methodologies or technologies in your field',
                    '6': 'Write and publish peer-reviewed articles, contribute to academic journals, co-author research papers',
                    '7': 'Seek leadership roles, work for well-known organizations, take on critical project responsibilities',
                    '8': 'Negotiate better compensation, demonstrate market value, pursue high-value contracts or positions'
                };
                return suggestions[questionNumber] || 'Strengthen this area through dedicated effort and strategic planning';
            } else {
                const suggestions = {
                    '1': 'Research and apply to SEVP-certified schools, ensure all application materials are complete',
                    '2': 'Plan for full-time enrollment (minimum 12 credits per semester) to meet F-1 requirements',
                    '3': 'Gather bank statements, sponsorship letters, scholarship confirmations to prove financial capacity',
                    '4': 'Take TOEFL/IELTS exams, enroll in English language courses, practice with native speakers',
                    '5': 'Document ties to home country: family, property ownership, job offers, strong reasons to return',
                    '6': 'Apply for or renew passport immediately, ensure validity extends beyond planned study duration'
                };
                return suggestions[questionNumber] || 'Address this requirement to improve your application strength';
            }
        }

        // Display final summary
        function displayFinalSummary() {
            const personalInfo = JSON.parse(localStorage.getItem('personalInfo') || '{}');
            const assessmentData = JSON.parse(localStorage.getItem('visaAssessment') || '{}');

            let html = `<div style="background: #f8f9fa; padding: 30px; border-radius: 12px;">
                <h3 style="color: #2c3e50; margin-bottom: 20px;">Assessment Overview</h3>
                <div style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 15px;">
                    <p><strong>Applicant:</strong> ${personalInfo.fullName}</p>
                    <p><strong>Visa Type:</strong> ${assessmentData.visaType}</p>
                    <p><strong>GPA:</strong> ${assessmentData.gpa}/4.0</p>
                    <p><strong>Score:</strong> ${assessmentData.totalPoints}/${assessmentData.maxPoints} points (${assessmentData.percentage}%)</p>
                </div>
            </div>`;

            document.getElementById('finalSummary').innerHTML = html;
            displayNextSteps(assessmentData);
            displayResources(assessmentData);
        }

        function displayNextSteps(assessmentData) {
            const percentage = parseFloat(assessmentData.percentage);
            let html = '<ol style="padding-left: 20px;">';

            if (assessmentData.visaType === 'O1') {
                if (percentage >= 60) {
                    html += '<li style="margin-bottom: 15px;">Gather comprehensive documentation for each criterion</li>';
                    html += '<li style="margin-bottom: 15px;">Obtain 3-5 expert recommendation letters</li>';
                    html += '<li style="margin-bottom: 15px;">Consult immigration attorney specializing in O-1 visas</li>';
                    html += '<li style="margin-bottom: 15px;">Find U.S. employer or agent sponsor</li>';
                    html += '<li style="margin-bottom: 15px;">Prepare Form I-129 petition package</li>';
                } else {
                    html += '<li style="margin-bottom: 15px;">Focus on areas with low scores identified in suggestions</li>';
                    html += '<li style="margin-bottom: 15px;">Build credentials systematically over next 6-12 months</li>';
                    html += '<li style="margin-bottom: 15px;">Network with industry leaders for mentorship</li>';
                    html += '<li style="margin-bottom: 15px;">Document all achievements and maintain portfolio</li>';
                }
            } else {
                if (percentage >= 70) {
                    html += '<li style="margin-bottom: 15px;">Obtain Form I-20 from your school</li>';
                    html += '<li style="margin-bottom: 15px;">Pay SEVIS I-901 fee ($350)</li>';
                    html += '<li style="margin-bottom: 15px;">Complete DS-160 application online</li>';
                    html += '<li style="margin-bottom: 15px;">Schedule visa interview at U.S. Embassy</li>';
                    html += '<li style="margin-bottom: 15px;">Prepare all financial and academic documents</li>';
                } else {
                    html += '<li style="margin-bottom: 15px;">Address missing requirements identified in suggestions</li>';
                    html += '<li style="margin-bottom: 15px;">Strengthen areas with low scores</li>';
                    html += '<li style="margin-bottom: 15px;">Prepare comprehensive documentation</li>';
                    html += '<li style="margin-bottom: 15px;">Consider consulting with education advisor</li>';
                }
            }

            html += '</ol>';
            document.getElementById('nextStepsContent').innerHTML = html;
        }

        function displayResources(assessmentData) {
            let html = '<ul style="list-style: none; padding: 0;">';

            if (assessmentData.visaType === 'O1') {
                html += '<li style="margin-bottom: 12px;">📎 <strong>USCIS O-1 Information:</strong> uscis.gov/working-in-the-united-states/temporary-workers/o-1-visa</li>';
                html += '<li style="margin-bottom: 12px;">📄 <strong>Form I-129:</strong> Download from USCIS website</li>';
                html += '<li style="margin-bottom: 12px;">⏱️ <strong>Processing Time:</strong> 2-3 months (15 days with premium processing)</li>';
                html += '<li style="margin-bottom: 12px;">👥 <strong>Community:</strong> Join A.L.I.E.N forums to connect with O-1 holders</li>';
            } else {
                html += '<li style="margin-bottom: 12px;">📎 <strong>Study in the States:</strong> studyinthestates.dhs.gov</li>';
                html += '<li style="margin-bottom: 12px;">📄 <strong>DS-160 Form:</strong> ceac.state.gov/genniv</li>';
                html += '<li style="margin-bottom: 12px;">💰 <strong>SEVIS Fee:</strong> fmjfee.com/i901fee</li>';
                html += '<li style="margin-bottom: 12px;">📅 <strong>Apply:</strong> 120 days before program start date</li>';
            }

            html += '</ul>';
            document.getElementById('resourcesContent').innerHTML = html;
        }

        function modifyData() {
            if (confirm('This will take you back to edit your information. Continue?')) {
                goToStep(1);
            }
        }

        function downloadResults() {
            const personalInfo = JSON.parse(localStorage.getItem('personalInfo') || '{}');
            const assessmentData = JSON.parse(localStorage.getItem('visaAssessment') || '{}');

            let text = `${'='.repeat(60)}\n`;
            text += `         A.L.I.E.N VISA ASSESSMENT RESULTS\n`;
            text += `${'='.repeat(60)}\n\n`;

            text += `PERSONAL INFORMATION\n${'-'.repeat(60)}\n`;
            text += `Name:      ${personalInfo.fullName}\n`;
            text += `Email:     ${personalInfo.email}\n`;
            text += `Phone:     ${personalInfo.phone}\n`;
            text += `Country:   ${personalInfo.country}\n`;
            text += `GPA:       ${assessmentData.gpa}/4.0\n`;
            text += `Date:      ${new Date().toLocaleDateString()}\n\n`;

            text += `ASSESSMENT RESULTS: ${assessmentData.visaType} VISA\n${'-'.repeat(60)}\n`;
            text += `Score:     ${assessmentData.totalPoints}/${assessmentData.maxPoints} points\n`;
            text += `Percentage: ${assessmentData.percentage}%\n\n`;

            text += `DETAILED RESPONSES:\n${'-'.repeat(60)}\n`;
            const questionMap = getQuestionMap(assessmentData.visaType);
            Object.entries(assessmentData.answers || {}).forEach(([questionId, answer]) => {
                const questionNumber = questionId.split('_')[1].substring(1);
                const questionText = questionMap[questionNumber];
                text += `\n${questionText}:\n`;
                text += `  Answer: ${answer.text}\n`;
                text += `  Points: ${answer.points}\n`;
            });

            text += `\n${'='.repeat(60)}\n`;
            text += `RECOMMENDATIONS\n${'-'.repeat(60)}\n`;

            const percentage = parseFloat(assessmentData.percentage);
            if (assessmentData.visaType === 'O1') {
                if (percentage >= 75) {
                    text += `✓ Excellent profile for O-1 visa\n`;
                    text += `✓ Proceed with gathering documentation\n`;
                    text += `✓ Consult with immigration attorney\n`;
                } else if (percentage >= 50) {
                    text += `○ Good foundation, but improvements recommended\n`;
                    text += `○ Focus on strengthening weak areas\n`;
                    text += `○ Build additional credentials over 3-6 months\n`;
                } else {
                    text += `! Significant improvements needed\n`;
                    text += `! Focus on building credentials systematically\n`;
                    text += `! Consider 6-12 month preparation timeline\n`;
                }
            } else {
                if (percentage >= 85) {
                    text += `✓ Strong F-1 visa candidate\n`;
                    text += `✓ Proceed with visa application\n`;
                    text += `✓ Ensure all documents are current\n`;
                } else if (percentage >= 70) {
                    text += `○ Good standing with minor gaps\n`;
                    text += `○ Address identified weaknesses\n`;
                    text += `○ Strengthen documentation\n`;
                } else {
                    text += `! Several requirements need attention\n`;
                    text += `! Address missing criteria before applying\n`;
                    text += `! Consult with education advisor\n`;
                }
            }

            text += `\n${'='.repeat(60)}\n`;
            text += `This assessment is for informational purposes only.\n`;
            text += `Consult licensed immigration attorney for legal advice.\n`;
            text += `${'='.repeat(60)}\n`;
            text += `\n© 2025 A.L.I.E.N - Empowering talent through merit\n`;

            const blob = new Blob([text], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ALIEN-${assessmentData.visaType}-Assessment-${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function resetAssessment() {
            if (confirm('Are you sure? This will clear all saved data and start fresh.')) {
                localStorage.removeItem('personalInfo');
                localStorage.removeItem('visaAssessment');
                location.reload();
            }
        }

        // Load saved data on page load
        window.addEventListener('load', function() {
            const savedPersonal = localStorage.getItem('personalInfo');

            if (savedPersonal) {
                const data = JSON.parse(savedPersonal);
                document.getElementById('fullName').value = data.fullName || '';
                document.getElementById('email').value = data.email || '';
                document.getElementById('phone').value = data.phone || '';
                document.getElementById('country').value = data.country || '';
            }
        });
    </script>
</body>
</html>